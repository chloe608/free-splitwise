{% extends "base.html" %}
{% block content %}
  <div class="row">
    <div class="col">
      <div class="card">
        <h2>Welcome, {{ user.first_name or user.username }}</h2>
        <p>Create or join a group to start tracking expenses.</p>
        <form method="post" action="{{ url_for('create_group') }}" id="create-form">
          <label>New group name</label>
          <input id="group-name" name="group_name" placeholder="e.g. Dinner with friends">
          <button id="create-btn" class="btn" type="submit" disabled>Create Group</button>
        </form>
        <hr>
        <form method="post" action="{{ url_for('join_group') }}" id="join-form">
          <label>Join with code</label>
          <input id="group-code" name="group_code" placeholder="GROUPCODE" required>
          <button id="join-btn" class="btn" type="submit" disabled>Join Group</button>
        </form>
      </div>
    </div>
    <div class="col">
      <div class="card">
        <h3>Your groups</h3>
        {% if groups %}
          <ul class="groups">
            {% for g in groups %}
              <li><a href="{{ url_for('group_view', group_id=g.id) }}">{{ g.name }}</a> <small>({{ g.code }})</small></li>
            {% endfor %}
          </ul>
        {% else %}
          <p>No groups yet.</p>
        {% endif %}
      </div>
    </div>
  </div>
  <script>
    (function(){
      function watchText(inputId, btnId){
        const input = document.getElementById(inputId);
        const btn = document.getElementById(btnId);
        if(!input || !btn) return;
        function update(){
          const has = input.value && input.value.trim().length>0;
          btn.disabled = !has;
          btn.classList.toggle('btn-active', has);
        }
        input.addEventListener('input', update);
        window.addEventListener('DOMContentLoaded', update);
        update();
      }
      watchText('group-name','create-btn');
      watchText('group-code','join-btn');
    })();
  </script>
{% endblock %}
